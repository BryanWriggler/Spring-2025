\documentclass{article}
\usepackage{graphicx} % Required for inserting images
\usepackage[margin = 2.54cm]{geometry}
\usepackage[most]{tcolorbox}

\newtcolorbox{myBox}[3]{
arc=5mm,
lower separated=false,
fonttitle=\bfseries,
%colbacktitle=green!10,
%coltitle=green!50!black,
enhanced,
attach boxed title to top left={xshift=0.5cm,
        yshift=-2mm},
colframe=blue!50!black,
colback=blue!10
}

\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{verbatim}
\usepackage[utf8]{inputenc}
\linespread{1.2}

\newtheorem{definition}{Definition}
\newtheorem{proposition}{Proposition}
\newtheorem{theorem}{Theorem}
\newtheorem{question}{Question}

\title{Math 118C HW4}
\author{Zih-Yu Hsieh}

\begin{document}
\maketitle

\section*{1}
\begin{myBox}[]{}
    \begin{question}
        Rudin Pg. 242 Problem 27:

        Put $f(0,0)=0$, and 
        $$f(x,y)=\frac{xy(x^2-y^2)}{x^2+y^2}$$
        if $(x,y)\neq (0,0)$. Prove that 
        \begin{itemize}
            \item[(a)] $f,\ D_1f,\ D_2f$ are continuous in $\mathbb{R}^2$.
            \item[(b)] $D_{12}f$ and $D_{21}f$ exist at every point of $\mathbb{R}^2$, and are continuous except at $(0,0)$.
            \item[(c)] $D_{12}f(0,0)=1$, and $D_{21}f(0,0)=-1$.  
        \end{itemize}
    \end{question}
\end{myBox}

\textbf{Pf:}

For all $(x,y)\in\mathbb{R}^2$ with $(x,y)\neq (0,0)$, using polar coordinates, $(x,y)=(r\cos(\theta),r\sin(\theta))$ for some $r>0$ and $\theta\in [0,2\pi)$. Which, $|(x,y)|=r$, when consider limit definition, we'll use polar coordinates instead.

\begin{itemize}
    \item[(a)] \textbf{$f$ is continuous:}
    
    For $(x,y)\neq (0,0)$, since $f$ is a defined rational function, it is continuous, so it suffices to show $f$ is continuous at $0$. For all $\epsilon>0$, choose $\delta=\sqrt{\frac{\epsilon}{2}}>0$, then for all $(x,y)$ satisfying $0<|(x,y)|=r<\delta$, we get the following:
    $$|f(x,y)-f(0,0)|=\left|\frac{(r\cos(\theta))(r\sin(\theta))((r\cos(\theta))^2-(r\sin(\theta))^2)}{(r\cos(\theta))^2+(r\sin(\theta))^2}-0\right|$$
    $$ = \left|\frac{r^4\sin(\theta)\cos(\theta)(\cos^2(\theta)-\sin^2(\theta))}{r^2}\right| \leq r^2|sin(\theta)|\cdot |\cos(\theta)|\cdot (|\cos(\theta)|^2+|\sin(\theta)|^2)$$
    $$\leq 2r^2 < 2\left(\sqrt{\frac{\epsilon}{2}}\right)^2 = 2\cdot\frac{\epsilon}{2} = \epsilon$$
    This shows that $f$ is continuous at $(0,0)$, hence $f$ in continuous in $\mathbb{R}^2$.

    \hfil

    \textbf{$D_1f$ is continuous:}

    First, using basic differentiation rule, for $(x,y)\neq (0,0)$, we get the following:
    $$D_1f(x,y) = \frac{\partial}{\partial x}\left(\frac{xy(x^2-y^2)}{x^2+y^2}\right) = \frac{(3x^2y-y^3)(x^2+y^2)-xy(x^2-y^2)2x}{(x^2+y^2)^2} = \frac{x^4y+4x^2y^3-y^5}{(x^2+y^2)^2}$$
    Which, at $(0,0)$, $D_1f$ could be obtained through limit:
    $$D_1f(0,0)=\lim_{h\rightarrow 0}\frac{f(h,0)-f(0,0)}{h} = \lim_{h\rightarrow 0}\frac{h\cdot 0(h^2-0^2)}{(h^2+0^2)h} = \lim_{h\rightarrow 0} 0 = 0$$
    Which, $D_1f(x,y)$ for $(x,y)\neq (0,0)$ is again a rational function, which is continuous, so to verify continuity, it suffices to check $(0,0)$. For all $\epsilon>0$, choose $\delta=\frac{\epsilon}{6}>0$, then for all $(x,y)$ satisfying $0<|(x,y)|=r<\delta$, we get the following:
    $$|D_1f(x,y)-D_1f(0,0)| = \left|\frac{(r\cos(\theta))^4(r\sin(\theta))+4(r\cos(\theta))^2(r\sin(\theta))^3-(r\sin(\theta)^5)}{((r\cos(\theta))^2+(r\sin(\theta))^2)^2}-0\right|$$
    $$ = \left|\frac{r^5(\cos^4(\theta)\sin(\theta)+4\cos^2(\theta)\sin^3(\theta))-\sin^5(\theta)}{r^4}\right| \leq r(|cos^4(\theta)\sin(\theta)|+4|cos^2(\theta)\sin^3(\theta)|+|\sin^5(\theta)|)$$
    $$\leq r(1+4+1) < 6\cdot\frac{\epsilon}{6} = \epsilon$$
    This proves the continuity of $D_1f$ at $(0,0)$, so $D_1f$ is continuous in $\mathbb{R}^2$.

    \hfil

    \textbf{$D_2f$ is continuous:}

    Using differentiation rule, for $(x,y)\neq (0,0)$, we get the following:
    $$D_2f(x,y)=\frac{\partial}{\partial y}\left(\frac{xy(x^2-y^2)}{x^2+y^2}\right) = \frac{(x^3-3xy^2)(x^2+y^2)-xy(x^2-y^2)2y}{(x^2+y^2)^2} = \frac{x^5-xy^4-4x^3y^2}{(x^2+y^2)^2}$$
    Again, at $(0,0)$, $D_2f$ could be obtained through limit:
    $$D_2f(0,0)=\lim_{h\rightarrow 0}\frac{f(0,h)-f(0,0)}{h} = \lim_{h\rightarrow 0}\frac{0\cdot h(0^2-h^2)}{(0^2+h^2)h} = \lim_{h\rightarrow 0}0=0$$
    Notice that $D_2f(x,y)$ for $(x,y)\neq (0,0)$ is a rational function, which is continuous, so to verify continuity, it suffices to check $(0,0)$. For all $\epsilon>0$, choose $\delta=\frac{\epsilon}{6}>0$, then for all $(x,y)$ satisfying $0<|(x,y)|=r<\delta$, we get the following:
    $$|D_2f(x,y)-D_2f(0,0)|=\left|\frac{(r\cos(\theta))^5-(r\cos(\theta))(r\sin(\theta))^4-4(r\cos(\theta))^3(r\sin(\theta))^2}{((r\cos(\theta))^2+(r\sin(\theta))^2)^2}-0\right|$$
    $$= \left|\frac{r^5(\cos^5(\theta)-\cos(\theta)\sin^4(\theta)-4\cos^3(\theta)\sin^2(\theta))}{r^4}\right| \leq r(|\cos^5(\theta)|+|\cos(\theta)\sin^4(\theta)|+4|\cos^3(\theta)\sin^2(\theta)|)$$
    $$ \leq r(1+1+4) < 6\cdot \frac{\epsilon}{6} = \epsilon$$
    This proves the continuity of $D_2f$ at $(0,0)$, hence $D_2f$ is continuous in $\mathbb{R}^2$.

    \hfil

    \hfil

    \item[(b)] \textbf{Function $D_{21}f$:}
    
    Given that $D_1f(x,y)=\frac{x^4y+4x^2y^3-y^5}{(x^2+y^2)^2}$ for $(x,y)\neq (0,0)$ and $D_1f(0,0)=0$, apply differentiation rule for $(x,y)\neq (0,0)$, we get:
    $$D_{21}f(x,y) = \frac{\partial}{\partial y}\left(\frac{x^4y+4x^2y^3-y^5}{(x^2+y^2)^2}\right) = \frac{(x^4+12x^2y^2-5y^4)(x^2+y^2)^2-(x^4y+4x^2y^3-y^5)2(x^2+y^2)2y}{(x^2+y^2)^4}$$
    Which, $D_{21}f(x,y)$ is continuous for $(x,y)\neq (0,0)$ (since it's a rational function).

    Now, to get $D_{21}f(0,0)$, we'll use limit definition:
    $$D_{21}f(0,0)=\lim_{h\rightarrow 0}\frac{D_1f(0,h)-D_1f(0,0)}{h} = \lim_{h\rightarrow 0}\frac{0^4\cdot h + 4\cdot 0^2\cdot h^3-h^5}{(0^2+h^2)^2 h} = \lim_{h\rightarrow 0}-\frac{h^5}{h^5}=-1$$
    Hence, $D_{21}f$ exists on the whole $\mathbb{R}^2$, and is continuous at all $(x,y)\neq (0,0)$. But, it is not continuous at $(0,0)$, since choosing $x\neq 0$ and $y=0$, $D_{21}f$ becomes:
    $$D_{21}f(x,0)=\frac{x^8}{x^8} = 1$$
    Hence, $\lim_{x\rightarrow 0}D_{21}f(x,0)=1\neq -1 = D_{21}f(0,0)$, showing the discontinuity at $(0,0)$.

    So, $D_{21}f$ exists on $\mathbb{R}^2$, while being continuous on $\mathbb{R}^2\setminus\{0\}$.

    \hfil

    \textbf{Function $D_{12}f$:}

    Given that $D_{2}f(x,y)=\frac{x^5-xy^4-4x^3y^2}{(x^2+y^2)^2}$ for $(x,y)\neq (0,0)$ and $D_2f(0,0)=0$, apply differentiation rule for $(x,y)\neq (0,0)$, we get:
    $$D_{12}f(x,y)=\frac{\partial}{\partial x}\left(\frac{x^5-xy^4-4x^3y^2}{(x^2+y^2)^2}\right) = \frac{(5x^4-y^4-12x^2y^2)(x^2+y^2)^2-(x^5-xy^4-4x^3y^2)2(x^2+y^2)2x}{(x^2+y^2)^4}$$
    Hence, $D_{12}f$ is continuous for $(x,y)\neq (0,0)$, since it's also a rational function.

    Now, to get $D_{12}f(0,0)$, we'll again use limit definition:
    $$D_{12}f(0,0)=\lim_{h\rightarrow 0}\frac{D_2f(h,0)-D_2f(0,0)}{h} = \lim_{h\rightarrow 0}\frac{h^5-h\cdot 0^4-4h^3\cdot 0^2}{(h^2+0^2)^2h} = \lim_{h\rightarrow 0}\frac{h^5}{h^5} = 1$$
    Hence, $D_{12}f$ exists on the whole $\mathbb{R}^2$, and is continuous at all $(x,y)\neq (0,0)$. But again, it's not continuous at $(0,0)$, since choosing $x=0$ and $y\neq 0$, $D_{12}f$ becomes:
    $$D_{12}f(0,y)=\frac{-y^8}{y^8}=-1$$
    Hence, $\lim_{y\rightarrow 0}D_{12}f(0,y) = -1 \neq 1 = D_{12}f(0,0)$, showing the discontinuity at $(0,0)$.

    So, $D_{12}f$ exists on $\mathbb{R}^2$, while being continuous on $\mathbb{R}^2\setminus\{0\}$.

    \hfil
    
    \hfil

    \item[(c)] From \textbf{part (b)}, when verifying that the existence of $D_{12}f(0,0)$ and $D_{21}f(0,0)$, we've shown that $D_{12}f(0,0)=1$, and $D_{21}f(0,0)=-1$.
\end{itemize}

\break

\section*{2}
\begin{myBox}[]{}
    \begin{question}
        Rudin Pg. 242 Problem 28:

        For $t\geq 0$, put 
        $$\varphi(x,t)=\begin{cases}
            x & 0\leq x\leq \sqrt{t}\\
            -x+2\sqrt{t} & \sqrt{t}\leq x\leq 2\sqrt{t}\\
            0 & \textmd{otherwise}
        \end{cases}$$
        and put $\varphi(x,t)=-\varphi(x,|t|)$ if $t<0$.

        Show that $\varphi$ is continuous on $\mathbb{R}^2$, and $D_2\varphi(x,0)=0$ for all $x$. Define 
        $$f(t)=\int_{-1}^{1}\varphi(x,t)dx$$
        Show that $f(t)=t$ if $|t|<\frac{1}{4}$. Hence 
        $$f'(0)\neq \int_{-1}^{1}D_2\varphi(x,0)dx$$
    \end{question}
\end{myBox}

\textbf{Pf:}

\textbf{Continuity of $\varphi$:}

\hfil

\textbf{Partial derivative of $\varphi$ with respect to $t$ when $t=0$:}

For all $x\in\mathbb{R}$, if $x=0$, then regardless of the points, 

\break

\section*{3}
\begin{myBox}[]{}
    \begin{question}
        Rudin Pg. 243 Problem 30:

        Let $f\in \mathcal{C}^{(m)}(E)$, where $E$ is an open subset of $\mathbb{R}^n$. Fix $a\in E$, and suppose $x\in\mathbb{R}^n$ is so close to $0$ that the points $p(t)=a+tx$ lie in $E$ whenever $0\leq t\leq 1$. Define $h(t)=f(p(t))$ for all $t\in\mathbb{R}$ for which $p(t)\in E$.
        \begin{itemize}
            \item[(a)] For $1\leq k\leq m$, show (by repeated application of the chain rule) that 
            $$h^{(k)}(t)=\sum (D_{l_1...l_k}f)(p(t))x_{l_1}...x_{l_k}$$
            The sum extends over all order $k$-tuples $(l_1,...,l_k)$ in which each $l_j$ is one of the integers $1,...,n$.
            \begin{comment}
            \item[(b)] By Taylor's Theorem:
            $$h(1)=\sum_{k=0}^{m-1}\frac{h^{(k)}(0)}{k!}+\frac{h^{(m)}(t)}{m!}$$
            for some $t\in (0,1)$. Use this to prove Taylor's Theorem in $n$ variables by showing that the formula 
            $$f(a+x)=\sum_{k=0}^{m-1}\frac{1}{k!}\left(\sum(D_{l_1...l_k}f)(a)x_{l_1}...x_{l_k}\right)+r(x)$$
            represents $f(a+x)$ as the sum of its so-called "Taylor polynomial of degree $m-1$" plus a remainder that satisfies 
            $$\lim_{x\rightarrow 0}\frac{r(x)}{|x|^{m-1}}=0$$
            Each of the inner sums extends over all ordered $k$-tuples $(l_1,...,l_k)$, as in part (a); as usual, the zero-order derivative of $f$ is simply $f$, so that the constant term of the Taylor polynomial of $f$ at $a$ is $f(a)$.
            \item[(c)] Exercise $29$ shows that repetition occurs in the Taylor polynomial as written in part (b). For instance, $D_{113}$ occurs three times, as $D_{113}, D_{131}, D_{311}$. The sum of the corresponding three terms can be written in the form 
            $$3(D_1^2D_3f)(a)x_1^2x_3$$
            Prove (by calculating how often each derivative occurs) that the Taylor polynomial in (b) can be written in the form 
            $$\sum\frac{(D_1^{s_1}...D_n^{s_n}f)(a)}{s_1!...s_n!}x_1^{s_1}...x_n^{s_n}$$
            Here the summation extends over all ordered $n$-tuples $(s_1,...,s_n)$ such that each $s_i$ is a nonnegative integer and $s_1+...+s_n\leq m-1$.
            \end{comment}
        \end{itemize}
    \end{question}
\end{myBox}

\textbf{Pf:}

Given $a,x\in\mathbb{R}^n$ (where $x=(x_1,...,x_n)$ for fixed $x_1,...,x_n\in\mathbb{R}^n$) and $p(t)=a+tx$ for $t\in [0,1]$, then $p'(t)=x$.

Now, we'll use induction to verify the formula (and we'll use matrix representation of the differentials).

First, for $k=1$, using chain rule, we get the following:
$$h'(t) = Df(p(t))p'(t) = \begin{pmatrix}
    D_1f & ... & D_nf
\end{pmatrix}\bigg|_{p(t)}\begin{pmatrix}
    x_1\\\vdots\\x_n
\end{pmatrix} = \sum_{i=1}^{n}D_if(p(t))x_i$$
Since all the possible $1$-tuple is included in the summation, the $h'(t)$ satisfies the given formula.

Now, suppose for given $1\leq k\leq (m-1)$, $h^{(k)}(t)$ satisfies the following formula:
$$h^{(k)}(t) = \sum(D_{l_1...l_k}f)(p(t))x_{l_1}...x_{l_k}$$
Since for each $k$-tuple $(l_1,...,l_k)$ (where each $l_i\in \{1,...,n\}$) has the function $x_{l_1}...x_{l_k}D_{l_1...l_k}f(p(t))$ being a differentiable function from $(0,1)$ to $\mathbb{R}$ (where $D_{l_1...l_k}f(z)$ for $z\in E$ is a differentiable function, since it has only been differentiated $k<m$ times, while $f\in C^{(m)}(E)$). Then, to calculate the $(k+1)^{th}$ derivative, we get:
$$h^{(k+1)}(t) = \sum\frac{d}{dt}(D_{l_1...l_k}f)(p(t))x_{l_1}...x_{l_k}$$

$$\forall (l_1,...,l_k),\quad \frac{d}{dt}(D_{l_1...l_k}f)(p(t))x_{l_1}...x_{l_k} = x_{l_1}...x_{l_k}D\left(D_{l_1...l_k}f\right)(p(t))p'(t)$$
$$= x_{l_1}...x_{l_k}\sum_{i=1}^{n}D_i\left(D_{l_1...l_k}f\right)(p(t))x_i = \sum_{i=1}^{n}D_{il_1...l_k}f(p(t))x_ix_{l_1}...x_{l_k}$$

$$\implies h^{(k+1)}(t) = \sum\left(\sum_{i=1}^{n}D_{il_1...l_k}f(p(t))x_ix_{l_1}...x_{l_k}\right)$$
Which, the first summation indicates all possible $k$-tuple $(l_1,...,l_k)$ for $l_j\in \{1,...,n\}$.

Now, for all $(k+1)$-tuple $(j_0,j_1,...,j_k)$ where each $j_l\in \{1,...,n\}$, choose the unique $k$-tuple $(j_1,...,j_k)$, then $D_{j_0j_1...j_k}f(p(t))x_{j_0}x_{j_1}...x_{j_k}$ appears precisely once in the summation of $h^{(k+1)}(t)$ given above; similarly, since each $k$-tuple $(l_1,...,l_k)$ and $i\in\{1,...,n\}$ corresponds to a unique $(k+1)$-tuple $(i,l_1,...,l_k)$, so the summation in $h^{(k+1)}(t)$ has a 1-to-1 correspondance to all $(k+1)$-tuple. Then, the summation $h^{(k+1)}(t)$ can also be described as:
$$h^{(k+1)}(t) = \sum D_{l_1...l_kl_{k+1}}f(p(t))x_{l_1}...x_{l_k}x_{l_{k+1}}$$
Where each $(l_1,...,l_k,l_{k+1})$ is a $(k+1)$-tuple with entries from $\{1,...,n\}$.

\break

\section*{4}
\begin{myBox}[]{}
    \begin{question}
        Rudin Pg. 288 Problem 2:

        For $i=1,2,3,...$, let $\varphi_i\in \mathcal{C}(\mathbb{R})$ have support in $(2^{-i},2^{1-i})$, such that $\int\varphi_i=1$. Put 
        $$f(x,y)=\sum_{i=1}^{\infty}(\varphi_i(x)-\varphi_{i+1}(x))\varphi_i(y)$$
        Then $f$ has compact support in $\mathbb{R}^2$, $f$ is cotinuous except at $(0,0)$, and 
        $$\int dy\int f(x,y)dx = 0,\quad \textmd{but } \int dx\int f(x,y)dy = 1$$
        Observe that $f$ is unbounded in every neighborhood of $(0,0)$.
    \end{question}
\end{myBox}

\textbf{Pf:}

\textbf{The function $f$ is well-defined:}

\end{document}